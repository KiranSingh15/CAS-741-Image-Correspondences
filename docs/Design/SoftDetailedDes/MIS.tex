\documentclass[12pt, titlepage]{article}

\usepackage{amsmath, mathtools}

\usepackage[round]{natbib}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{graphicx}
\usepackage{colortbl}
\usepackage{xr}
\usepackage{hyperref}
\usepackage{longtable}
\usepackage{xfrac}
\usepackage{tabularx}
\usepackage{float}
\usepackage{siunitx}
\usepackage{booktabs}
\usepackage{multirow}
\usepackage[section]{placeins}
\usepackage{caption}
\usepackage{fullpage}

\hypersetup{
bookmarks=true,     % show bookmarks bar?
colorlinks=true,       % false: boxed links; true: colored links
linkcolor=red,          % color of internal links (change box color with linkbordercolor)
citecolor=blue,      % color of links to bibliography
filecolor=magenta,  % color of file links
urlcolor=cyan          % color of external links
}

\usepackage{array}

\externaldocument{../../SRS/SRS}

\input{../../Comments}
\input{../../Common}

\begin{document}

\title{Module Interface Specification for \progname{}}

\author{\authname}

\date{\today}

\maketitle

\pagenumbering{roman}

\section{Revision History}

\begin{tabularx}{\textwidth}{p{3cm}p{2cm}X}
\toprule {\bf Date} & {\bf Version} & {\bf Notes}\\
\midrule
2025-03-21 & 1.0 & Initial Release\\
\bottomrule
\end{tabularx}

~\newpage

\section{Symbols, Abbreviations and Acronyms}

See SRS Documentation at \url{https://github.com/KiranSingh15/CAS-741-Image-Correspondences/blob/main/docs/SRS/SRS.pdf}. Additional 
symbols and abbreviations are outlined in below.

\renewcommand{\arraystretch}{1.2}
%\noindent \begin{tabularx}{1.0\textwidth}{l l X}
\noindent 
\begin{longtable*}{l l p{12cm}} 
  \toprule
\textbf{symbol} & \textbf{type} & \textbf{description}\\
\midrule 
b & $\mathbb{N}$ & bin size\\
bf\_matcher\_object & - & Instance of a Brute Force Matcher object as \href{https://docs.opencv.org/3.4/d3/da1/classcv_1_1BFMatcher.html}{BFMatcher Class}\\
colour & $\mathbb{N}^{3}$ & 2D array of RGB values to assign red, green, and blue pixels\\
crosscheck flag & $\mathbb{B}$ & flag used to assign how features are compared and matched\\
descriptors, fd1, fd2 & $\mathbb{N}$ &	Feature Descriptors as \href{https://docs.opencv.org/4.x/d0/d13/classcv_1_1Feature2D.html}{OpenCV Feature2D Class}\\
head\_dir	& str	& A str that indicates the local directory of the IFC program within the file path system\\
image\_IDs & str & List of strings that contains all IDs of saved images\\
img, img\_in, img\_out & $\mathbb{N}^{h \times w}$& Instance of an image object with height h and width w in pixels\\
img\_obj\_1, img\_obj\_2 & $\mathbb{N}^{h \times w}$& Instances of image objects with height h and width w in pixels\\
$img\_idx\_1$, $img\_idx\_1$ & $\mathbb{N}$ & Indices of image names within the list \textbf{image\_IDs}\\
img\_kp	& $\mathbb{N}^{h \times w}$	& Instance of an image with displayed keypoints\\
img\_fd	& $\mathbb{N}^{h \times w}$	& Instance of an image with size keypoints to account for feature descriptors\\
img\_fm	& $\mathbb{N}^{h \times w}$ & Instance of two combined images with corresponding matches between keypoints\\
k & $\mathbb{N}$ & kernel size \\
keypoints, kp1, kp2 & - & Keypoints as \href{https://docs.opencv.org/3.4/d2/d29/classcv_1_1KeyPoint.html}{OpenCV Keypoint Class}\\
matches & - & instance of matched features as \href{https://docs.opencv.org/3.4/d4/de0/classcv_1_1DMatch.html}{OpenCV DMatch Class} \\
mthd\_img\_smoothing & $\mathbb{N}$ & method employed to perform image smoothing, where values range from 1 to $n$ methods.\\
mthd\_kp\_detection & $\mathbb{N}$ & method employed to perform keypoint detection, where values range from 1 to $n$ methods.\\
mthd\_kp\_description & $\mathbb{N}$ & method employed to identify feature descriptors, where values range from 1 to $n$ methods.\\
mthd\_ft\_match & $\mathbb{N}$ & method employed to perform feature matching, where values range from 1 to $n$ methods.\\
norm\_method & $\mathbb{N}$ & method used to determine the norm between two features per \href{https://docs.opencv.org/4.x/d2/de8/group__core__array.html#ggad12cefbcb5291cf958a85b4b67b6149fa4b063afd04aebb8dd07085a1207da727}{OpenCV NORM HAMMING}\\ 
num\_images & $\mathbb{N}$ & number of images to be processed\\
orb\_object & - &	instance of an \href{https://docs.opencv.org/3.4/db/d95/classcv_1_1ORB.html}{OpenCV ORB Class}\\
p	& $\mathbb{N}$ & patch size\\
path\_keypoints	& str	& Relative path to save keypoint data and imagery\\
path\_descriptors & str	& Relative path to save feature descriptor data and imagery\\
path\_matches	& str	& Relative path to save feature match data and imagery\\
query\_img\_id & str & name of the query image\\
$\sigma$ & $\mathbb{R}$ & standard deviation of the Gaussian kernel\\
sel\_read\_path & str & user-defined read path to import imagery data\\
sel\_save\_path & str & user-defined read path to export imagery data\\
sorted\_matches & - & instance of matched features as \href{https://docs.opencv.org/3.4/d4/de0/classcv_1_1DMatch.html}{OpenCV DMatch Class} \\
t & $\mathbb{N}$ & FAST Intensity Threshold \\
train\_img\_id & str & name of the training image\\


\bottomrule
\end{longtable*}



\newpage

\tableofcontents

\newpage

\pagenumbering{arabic}

\section{Introduction}

The following document details the Module Interface Specifications for
the Image Feature Correspondence Software. The software identifies regions with similar feautures and pixel 
intensities amongst images, and returns a set of correspondences between these images to support downstream 
perception for applications in robotics.

Complementary documents include the System Requirement Specifications
and Module Guide.  The full documentation and implementation can be
found at \url{https://github.com/KiranSingh15/CAS-741-Image-Correspondences}.

\section{Notation}
The structure of the MIS for modules comes from \citet{HoffmanAndStrooper1995},
with the addition that template modules have been adapted from
\cite{GhezziEtAl2003}.  The mathematical notation comes from Chapter 3 of
\citet{HoffmanAndStrooper1995}.  For instance, the symbol := is used for a
multiple assignment statement and conditional rules follow the form $(c_1
\Rightarrow r_1 | c_2 \Rightarrow r_2 | ... | c_n \Rightarrow r_n )$.

The following table summarizes the primitive data types used by the \progname software. 

\begin{center}
\renewcommand{\arraystretch}{1.2}
\noindent 
\begin{tabular}{l l p{7.5cm}} 
\toprule 
\textbf{Data Type} & \textbf{Notation} & \textbf{Description}\\ 
\midrule
character & char & a single symbol or digit\\
string & str & a sequence of characters\\
boolean & $\mathbb{B}$ & a boolean in \{0,1\}\\
integer & $\mathbb{Z}$ & a number without a fractional component in (-$\infty$, $\infty$) \\
natural number & $\mathbb{N}$ & a number without a fractional component in [0, $\infty$) \\
real & $\mathbb{R}$ & any number in (-$\infty$, $\infty$)\\
\bottomrule
\end{tabular} 
\end{center}

\noindent
The specification of \progname \ uses some derived data types: sequences, strings, and
tuples. Sequences are lists filled with elements of the same data type. Strings
are sequences of characters. Tuples contain a list of values, potentially of
different types. In addition, \progname \ uses functions, which
are defined by the data types of their inputs and outputs. Local functions are
described by giving their type signature followed by their specification.

\section{Module Decomposition}

The following table is taken directly from the Module Guide document for this project.

\begin{table}[h!]
\centering
\begin{tabular}{p{0.3\textwidth} p{0.6\textwidth}}
\toprule
\textbf{Level 1} & \textbf{Level 2}\\
\midrule

{Hardware-Hiding} & ~ \\
\midrule

\multirow{9}{0.3\textwidth}{Behaviour-Hiding} & Control Module\\
& Input Format Module \\
& Specification Parameters Module \\
& Output Format Module \\
& Output Verification Module \\
& Image Smoothing Module \\
& Keypoint Detection Module \\
& Feature Descriptor Module \\
& Feature Matching Module \\
& Image Plot Module \\
\midrule

\multirow{5}{0.3\textwidth}{Software Decision} & OpenCV Library \\
\bottomrule
 
\end{tabular}
\caption{Module Hierarchy}
\label{TblMH}
\end{table}

\newpage
~\newpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{MIS of Control Module} \label{mC}
\subsection{Module}
main

\subsection{Uses}
\begin{itemize}
  \item config (Section~\ref{mIF})
  \item formatOutput (Section~\ref{mOF})
  \item verifyOutput (Section~\ref{mOV})
  \item detectKeypoints (Section~\ref{mKD})
  \item assignDescriptors (Section~\ref{mFD})
  \item matchFeatures (Section~\ref{mFM})
  \item plotImage (Section~\ref{mIP})

\end{itemize}

\subsection{Syntax}

\subsubsection{Exported Constants}

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{2cm} p{4cm} p{4cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
main & - & - & - \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}
\begin{itemize}
  \item k: $\mathbb{N}$
  \item $\sigma$: $\mathbb{R}$
  \item : $\mathbb{N}$
  \item b: $\mathbb{N}$
  \item p: $\mathbb{N}$
  \item mthd\_img\_smoothing: $\mathbb{N}$
  \item mthd\_kp\_detection: $\mathbb{N}$
  \item mthd\_kp\_description: $\mathbb{N}$
  \item mthd\_ft\_match: $\mathbb{N}$
  \item img\_obj\_1, img\_obj\_2: $\mathbb{N}^{h \times w}$ 
  \item img\_kp, img\_fd, img\_fm: $\mathbb{N}^{h \times w}$
  \item orb\_object: \href{https://docs.opencv.org/3.4/db/d95/classcv_1_1ORB.html}{OpenCV ORB Class}
  \item brute\_force\_obj: \href{https://docs.opencv.org/3.4/d3/da1/classcv_1_1BFMatcher.html}{BFMatcher Class}
  \item kp1, kp2: \href{https://docs.opencv.org/3.4/d2/d29/classcv_1_1KeyPoint.html}{OpenCV Keypoint Class}
  \item fd1, fd2: \href{https://docs.opencv.org/4.x/d0/d13/classcv_1_1Feature2D.html}{OpenCV Feature2D Class}
  \item matches: \href{https://docs.opencv.org/3.4/d4/de0/classcv_1_1DMatch.html}{OpenCV DMatch Class}
  \item image\_IDs: str$^{n}$
\end{itemize}

% do we need to make these directories here? I dont think so


\subsubsection{Environment Variables}
\begin{itemize}
  \item head\_dir as str
  \item path\_input\_img as str 
  \item path\_keypoints as str
  \item path\_descriptors as str
  \item path\_feature\_matches as str
\end{itemize}


\subsubsection{Assumptions}
none

\subsubsection{Access Routine Semantics}
\noindent main():
\begin{itemize}
\item transition: Modify the state of the Specification Parameters Module and the 
environment variables for the Image Plot Module and Output Format Module.
\end{itemize}
[head\_dir as str] = get\_head\_directory() \newline
set\_parent\_directory(head\_dir)\newline \newline
[mthd\_img\_smoothing, mthd\_kp\_detection, mthd\_kp\_descriptors, 
mthd\_ft\_matching] 
= get\_active\_methods() \newline \newline
[k, $\sigma$, t, b, patch\_s]
= get\_chosen\_parameters() \newline \newline
check\_limits(k, b, p, t, $\sigma$) \newline \newline
[image\_IDs, num\_images] = get\_img\_IDs(head\_dir) \newline \newline
\#\# \textit{For images $img_{1}$ and $img_{2}$ in image\_IDs, where $img_{1} \neq img_{2}$ and $img_{1} < img_{2}$}\newline
\# \textit{Smooth the image as a preprocessing step to keypoint detection} \newline
img\_obj\_1 = smooth\_image(img\_obj\_1, k, $\sigma$) \newline \newline
\# \textit{Identify the keypoints. Note that if the methods for keypoint detection and 
descriptors are both == 1, then ORB is the selected method, and the keypoint and descriptor 
modules should use the same ORB object, which likely will come from the OpenCV library}\newline \newline
orb\_object = initialize\_orb(mthd\_kp\_detection, t, b, p) \newline
brute\_force\_object = create\_BF\_matcher(mthd\_ft\_match, 6, TRUE) where 6 is the enumerated value of the Hamming Norm \newline
kp1 = detect\_keypoints(orb\_object, img\_1)\newline 
kp2 = detect\_keypoints(orb\_object, img\_2)\newline \newline
\# \textit{export keypoints to csv} \newline 
output\_keypoints(img\_IDs($img\_idx\_{1}$), head\_dir, kp1), where the image index corresponds to the selected keypoints \newline
output\_keypoints(img\_IDs($img\_idx\_{2}$), head\_dir, kp2) \newline \newline
\# \textit{Assign descriptors to keypoints} \newline 
fd1 = compute\_descriptors(img\_1, kp1)\newline 
fd2 = compute\_descriptors(img\_2, kp2)\newline \newline
\# \textit{export descriptors to csv} \newline
output\_features(img\_IDs($img\_idx\_{1}$), head\_dir, fd1), where the image index corresponds to the selected descriptors \newline
output\_features(img\_IDs($img\_idx\_{2}$), head\_dir, fd1) \newline \newline
\# \textit{generate and save image with keypoints} \newline 
img\_kp = gen\_kp\_img(img\_IDs($img\_idx\_{1}$), kp1, 0)\newline
save\_image(img\_kp, ``"kpDetection'', img\_IDs($img\_idx\_{1}$))\newline \newline
\# \textit{generate and save image with scaled keypoints} \newline 
img\_kp = gen\_kp\_img(img\_IDs($img\_idx\_{2}$), kp2, 0)\newline
save\_image(img\_kp, ``"kpDetection'', img\_IDs($img\_idx\_{2}$))\newline \newline
\# \textit{generate and save image with scaled keypoints} \newline
img\_fd = gen\_kp\_img(img\_IDs($img\_idx\_{1}$), kp1, 4), where flag = 4 representes a flag to draw rich keypoints\newline
save\_image(img\_kp, ``fDescriptors'', img\_IDs($img\_idx\_{1}$))\newline \newline
img\_fd = gen\_kp\_img(img\_IDs($img\_idx\_{2}$), kp2, 4)\newline
save\_image(img\_kp, ``fDescriptors'', img\_IDs($img\_idx\_{2}$))\newline \newline
\#\# \newline \newline
\# \textit{Compare features between differing images} \newline 
matches = match\_features(brute\_force\_obj, fd1, fd2) \newline
matches = sort\_matches(brute\_force\_obj, matches) \newline \newline
\# \textit{verify that the match structure conforms to the conditions in the
Output Verification Module} \newline 
check\_match\_uniqueness(img\_IDs($img\_idx\_{1}$), img\_IDs($img\_idx\_{2}$, matches)\newline \newline
\# \textit{export matches to csv} \newline
output\_matches(img\_IDs($img\_idx\_{1}$), img\_IDs($img\_idx\_{2}$), head\_dir, matches) \newline \newline
\# \textit{generate and save images with corresponding matches} \newline
img\_fm = gen\_matched\_features(img\_obj\_1, kp1, img\_obj\_2, kp2, matches, 200, 2), where 200 of the best matches are shown,
and the flag of 2 indicates that unmatched keypoints will not be displayed.\newline
save\_image(img\_fm,``fMatches'', img\_IDs($img\_idx\_{1}$ + img\_IDs($img\_idx\_{2}$))


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{MIS of Input Format Module} \label{mIF}
This module addresses the functional requirements as follows.
\begin{itemize}
  \item R\ref{R_Update_SD}
  \item R\ref{R_Update_Intensity}
  \item R\ref{R_Update_Patch}
  \item R\ref{R_Update_BinSize}
\end{itemize}
\subsection{Module}

config

\subsection{Uses}
\begin{itemize}
\item specParams (Section~\ref{mSP})
\end{itemize}

\subsection{Syntax}

\subsubsection{Exported Constants}

\subsubsection{Exported Access Programs}
\begin{tabular}{p{4cm} p{4cm} p{4.5cm} p{3.5cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
get\_head\_directory 
& - 
& head\_dir as string 
& noHeadFound \\
\hline
get\_active\_functions 
& - 
& mthd\_img\_smoothing: $\mathbb{N}$, \newline 
mthd\_kp\_detection: $\mathbb{N}$, \newline 
mthd\_kp\_description: $\mathbb{N}$, \newline 
mthd\_ft\_match: $\mathbb{N}$
& - \\
\hline
get\_chosen\_parameters & - 
& k: $\mathbb{N}$, \newline 
b: $\mathbb{N}$, \newline  
p: $\mathbb{N}$, \newline 
t: $\mathbb{N}$, \newline 
$\sigma$: $\mathbb{N}$
& - \\
\hline
get\_img\_IDs 
& head\_dir as str 
& img\_IDs as $str^{n}$ 
& - \\
\hline
check\_limits 
& k: $\mathbb{N}$, \newline 
b: $\mathbb{N}$, \newline  
p: $\mathbb{N}$, \newline 
t: $\mathbb{N}$, \newline 
$\sigma$ $\mathbb{N}$
& - 
& invalid\_parameters\\
\hline
\end{tabular}


\subsection{Semantics}

\subsubsection{State Variables}
\begin{itemize}
  \item k: $\mathbb{Z}$
  \item $\sigma$: $\mathbb{R}$
  \item t: $\mathbb{Z}$
  \item b: $\mathbb{Z}$
  \item p: $\mathbb{Z}$
  \item mthd\_img\_smoothing: $\mathbb{Z}$
  \item mthd\_kp\_detection: $\mathbb{Z}$
  \item mthd\_kp\_description: $\mathbb{Z}$
  \item mthd\_ft\_match: $\mathbb{Z}$
\end{itemize}

tuple of methods and parameters goes here.\\
set the state as the defaults, \\
then set the state as the user defined methods, if available


\subsubsection{Environment Variables}
\begin{itemize}
  \item head\_dir as str
\end{itemize}

\subsubsection{Assumptions}
none 

\subsubsection{Access Routine Semantics}
\noindent get\_head\_directory():
\begin{itemize}
  \item output: head\_dir = Path(os.getcwd()) where head\_dir defined as 
  a member of the \href{https://docs.python.org/3/library/os.path.html}{Python Path Class}.
  \item exception exc:= none
\end{itemize}


\noindent get\_active\_functions():
\begin{itemize}
  \item output: out := [mthd\_img\_smoothing, mthd\_kp\_detection, 
  mthd\_kp\_description, mthd\_ft\_match] 
\end{itemize}


\noindent get\_chosen\_parameters():
\begin{itemize}
  \item output: out:= [k, b, p, t,  $\sigma$]
  \item exception exc:= none
\end{itemize}


\noindent get\_img\_IDs(head\_dir as str): \newline \newline
img\_path = Path(head\_dir + "Raw\_Images") \newline
img\_dir = Path(img\_path) \newline
image\_IDs = [(file.stem, file.suffix, file.name) 
for file in img\_dir.iterdir() if file.is\_file()] \newline
num\_images = len(input\_img)
\begin{itemize}
\item output: out:= image\_IDs $\in str^{n}$, num\_images $\in \mathbb{N}$
\item exception: none 
\end{itemize}


\noindent check\_limits():
\begin{itemize}
  \item output: out:= none
  \item exception: exc:=invalid\_parameters\
  \noindent \begin{longtable*}[l]{l l} 
    $\neg (k < 1)$ & $\Rightarrow$ "badKernelSize"\\
    $\neg (k > 15)$ & $\Rightarrow$ "badKernelSize"\\
    $\neg (k \; \% \; 2 \neq 0)$ & $\Rightarrow$ "badKernelSize"\\
    $\neg (0 < \sigma < 10)$ & $\Rightarrow$ "badStdDeviation"\\
    $\neg (2 \leq t \leq 255)$ & $\Rightarrow$ "badFASTThreshold"\\
    $\neg (1 \leq b \leq 2048)$ & $\Rightarrow$ "badBinSize"\\
    $\neg (5 \leq p \leq 100)$ & $\Rightarrow$ "badPatchSize"\\
    \end{longtable*}
\end{itemize}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{MIS of Specification Parameters Module} \label{mSP}
This module addresses the functional requirements as follows.
\begin{itemize}
  \item R\ref{R_Default_Noise}
\end{itemize}

\subsection{Module}
specParams (Section~\ref{mIF})

\subsection{Uses}
None.

\subsection{Syntax}

\subsubsection{Exported Constants}
\begin{itemize}
  \item $k: = 5$
  \item $\sigma: = 1$ 
  \item $t: = 15$ 
  \item $b: = 2000$ 
  \item $p: = 31$ 
  \item $mthd\_img\_smoothing: = 1$
  \item $mthd\_kp\_detection: = 1$ 
  \item $mthd\_kp\_description: = 1$
  \item $mthd\_ft\_match: = 1$
\end{itemize}
\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{4cm} p{3.5cm} p{4.5cm} p{3.5cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
get\_default\_parameters & - & 
k: $\mathbb{Z}$ \newline 
$\sigma$: $\mathbb{R}$ \newline 
t: $\mathbb{Z}$ \newline 
b: $\mathbb{Z}$ \newline 
p: $\mathbb{Z}$ 
& - \\
\hline
get\_default\_methods & - & 
mthd\_img\_smoothing: $\mathbb{Z}$ \newline 
mthd\_kp\_detection: $\mathbb{Z}$ \newline 
mthd\_kp\_description: $\mathbb{Z}$ \newline 
mthd\_ft\_match: $\mathbb{Z}$ & - \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

k: $\mathbb{Z}$ \\
$\sigma$: $\mathbb{R}$ \\
t: $\mathbb{R}$ \\
b: $\mathbb{Z}$ \\
p: $\mathbb{Z}$ \\
mthd\_img\_smoothing: $\mathbb{Z}$ \\
mthd\_kp\_detection: $\mathbb{Z}$ \\
mthd\_kp\_description: $\mathbb{Z}$ \\
mthd\_ft\_match: $\mathbb{Z}$ \\

\subsubsection{Environment Variables}
none

\subsubsection{Assumptions}
none 

\subsubsection{Access Routine Semantics}
\noindent get\_default\_parameters():
\begin{itemize}
\item output: out:= [k, $\sigma$ t, b, p]
  \item exception: none  
\end{itemize}

\noindent get\_default\_methods():
\begin{itemize}
\item output:
  \begin{itemize}
    \item mthd\_img\_smoothing: $\mathbb{Z}$
    \item mthd\_kp\_detection: $\mathbb{Z}$ 
    \item mthd\_kp\_description: $\mathbb{Z}$
    \item mthd\_ft\_match: $\mathbb{Z}$
  \end{itemize}
  \item exception: none 
\end{itemize}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{MIS of Output Format Module} \label{mOF}
\begin{itemize}
  \item R\ref{R_UniqueMatch_IDs}
  \item R\ref{R_OutputCorrespondences}
\end{itemize}
\subsection{Module}

formatOutput

\subsection{Uses}
\begin{itemize}
  \item OpenCVLib (Section~\ref{mOpenCV})
\end{itemize}

\subsection{Syntax}

\subsubsection{Exported Constants}
Not applicable.
\subsubsection{Exported Access Programs}

\begin{center}
  \begin{tabular}{p{3cm} p{4cm} p{4cm} p{2cm}}
  \hline
  \textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
  \hline
  output\_keypoints 
  & img\_id: str, \newline
  parent\_dir: str, \newline
  keypoints: \href{https://docs.opencv.org/3.4/d2/d29/classcv_1_1KeyPoint.html}{OpenCV Keypoint Class}
  & -  
  & - \\
  \hline
  output\_features 
  & img\_id: str, \newline
  parent\_dir: str, \newline
  descriptors: \href{https://docs.opencv.org/3.4/d4/de0/classcv_1_1DMatch.html}{OpenCV DMatch Class}
  & - 
  & - \\
  \hline
  output\_matches 
  & query\_img\_id: str, \newline
  train\_img\_id: str, \newline
  parent\_dir: str, \newline
  matches: \href{https://docs.opencv.org/3.4/d3/da1/classcv_1_1BFMatcher.html}{BFMatcher Class}
  & - 
  & - \\
  \hline
  \end{tabular}
  \end{center}
  
  \subsection{Semantics}
  
  \subsubsection{State Variables}
  \begin{itemize}
    \item keypoint\_fldr: str
    \item feature\_fldr: str
    \item match\_fldr: path
  \end{itemize}
  
  \subsubsection{Environment Variables}
  %%%%%%%%%% 
  \begin{itemize}
    \item keypoint\_path: str
    \item feature\_path: str
    \item match\_path: path
  \end{itemize}
  
  
  \subsubsection{Assumptions}
  none 
  \subsubsection{Access Routine Semantics}
  
  \noindent output\_keypoints(img\_id, parent\_id, keypoints):
  \begin{itemize}
    \item transition: tran:= keypoint\_path = parent\_dir + keypoint\_fldr + img\_id + ``kp'' + ``.csv", where keypoint\_path specifies the 
    path to the output CSV file for the identified keypoints. This file will output the keypoint properties as follows 
    per the \href{https://docs.opencv.org/3.4/d2/d29/classcv_1_1KeyPoint.html}{OpenCV Keypoint Class}.
  
    \begin{itemize}
      \item horizontal pixel position
      \item vertical pixel position
      \item size 
      \item angle
      \item response 
    \end{itemize}
  \item output: none 
  \item exception: none 
  \end{itemize}
  
  
  \noindent output\_features(img\_id, parent\_dir, features):
  \begin{itemize}
    \item transition: tran:= feature\_path = parent\_dir + img\_id + feature\_fldr + ``fd" + ``.csv", where descriptor\_path specifies the 
    path to the output CSV file for the identified feature descriptors. This file will output the descriptor properties 
    as follows per the \href{https://docs.opencv.org/4.x/d0/d13/classcv_1_1Feature2D.html}{OpenCV Feature2D Class}.
    \begin{itemize}
      \item horizontal pixel position: $\mathbb{N}$
      \item vertical pixel position: $\mathbb{N}$
      \item size: $\mathbb{N}$
      \item angle: $\mathbb{R}^{+}$
      \item response: $\mathbb{N}$
      \item descriptor: $\mathbb{N}_{256}^{32}$, where each bit is a 32-byte vector, and 
      $\mathbb{N}_{256}$ represents unsigned 8-bit numbers [0, 255]
    \end{itemize}
  \item output: none 
  \item exception: none 
  \end{itemize}
  
  
  \noindent output\_matches(query\_img\_id, train\_img\_id, parent\_dir, matches):
  \begin{itemize}
    \item transition: tran:= match\_path = parent\_dir + query\_img\_id + train\_img\_id + match\_fldr + ``fm" + ``.csv", 
    where match\_path specifies the path to the output CSV file for the identified matches. 
    This file will output the properties for each keypoint as 
    follows per the \href{https://docs.opencv.org/3.4/d3/da1/classcv_1_1BFMatcher.html}{BFMatcher Class}.
    \begin{itemize}
      \item query index: $\mathbb{N}$
      \item query horizontal position: $\mathbb{N}$
      \item query vertical position: $\mathbb{N}$
      \item train index: $\mathbb{N}$
      \item train horizontal position: $\mathbb{N}$
      \item train vertical position: $\mathbb{N}$
      \item Distance: $\mathbb{N}$
    \end{itemize}
    \item output: none
    \item exception: none
  \end{itemize}


\subsubsection{Local Functions}
none

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{MIS of Output Verification Module} \label{mOV}
\begin{itemize}
  \item R\ref{R_DistinctImages}
\end{itemize}
\subsection{Module}

verifyOutput

\subsection{Uses}
None.

\subsection{Syntax}

\subsubsection{Exported Constants}

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{4.5cm} p{4cm} p{4cm} p{3cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
check\_match\_uniqueness 
& query\_img\_id: str, \newline
train\_img\_id: str, \newline
matches: \href{https://docs.opencv.org/3.4/d3/da1/classcv_1_1BFMatcher.html}{BFMatcher Class}
& -  
& same\_image, \newline
same\_descriptor \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}
none
% \begin{itemize}
%   \item keypoint\_fldr: str
%   \item feature\_fldr: str
%   \item match\_fldr: path
% \end{itemize}

\subsubsection{Environment Variables}
none
% \begin{itemize}
%   \item keypoint\_path: str
%   \item feature\_path: str
%   \item match\_path: path
% \end{itemize}


\subsubsection{Assumptions}
none

\subsubsection{Access Routine Semantics}

\noindent check\_match\_uniqueness (query\_img\_id, train\_img\_id, matches):
\begin{itemize}
  \item output: none 
  \item exception:
  \begin{itemize}
    \item exc := ``same\_image'' \textbar{} (query\_img\_id == train\_img\_id), where the query and training images share the same name.
    \item exc := ``same\_descriptor'' \textbar{} (matches.query\_x == matches.train\_x \&\& matches.query\_y == matches.train\_y), where the coordinates of the matched features match between both query and training images.
  \end{itemize}
\end{itemize}


\subsubsection{Local Functions}
none


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{MIS of Image Smoothing Module} \label{mIS}
\begin{itemize}
  \item R\ref{R_NoiseReduction}
\end{itemize}
\subsection{Module}
smoothImage

\subsection{Uses}
\begin{itemize}
  \item config (Section~\ref{mC})
\end{itemize}

\subsection{Syntax}
\subsubsection{Exported Constants}
None.
\subsubsection{Exported Access Programs}
\begin{center}
  \begin{tabular}{p{4cm} p{4.5cm} p{4cm} p{2cm}}
  \hline
  \textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
  \hline
  smooth\_image
  & mthd\_img\_smoothing: $\mathbb{N}$ \newline
  img\_in: $\mathbb{N}^{h \times w}$ \newline
  k: $\mathbb{N}$ \newline
  $\sigma$: $\mathbb{N}$
  & img\_out: $\mathbb{N}^{h \times w}$
  & - \\
  \hline
  get\_orb\_object 
  & -
  & orb\_object as \href{https://docs.opencv.org/3.4/db/d95/classcv_1_1ORB.html}{OpenCV ORB Class}
  & - \\
  \hline
  detect\_keypoints 
  & orb\_object as \href{https://docs.opencv.org/3.4/db/d95/classcv_1_1ORB.html}{OpenCV ORB Class}, \newline
  img $\in \mathbb{N}^{h \times w}$
  & keypoints as \href{https://docs.opencv.org/3.4/d2/d29/classcv_1_1KeyPoint.html}{OpenCV Keypoint Class}
  & - \\
  \hline
  \end{tabular}
  \end{center}

\subsubsection{Environment Variables}
none

\subsubsection{Assumptions}
  \begin{itemize}
  \item Exceptions on input limits are handled in specParams module.
  \end{itemize}

\subsubsection{Access Routine Semantics}

\noindent smooth\_image(mthd\_img\_smoothing, img\_in, 
k, $\sigma$ \textbar \: mthd\_img\_smoothing == 1):
\begin{itemize}
\item output: out:= img\_out = gaussianBlur(img\_in, 
  k, $\sigma$)
\item exception: None
\end{itemize}




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{MIS of Keypoint Detection Module} \label{mKD}
\begin{itemize}
  \item R\ref{R_Default_FD}
  \item R\ref{R_DetectKeypoints}
\end{itemize}

\subsection{Module}
detectKeypoints

\subsection{Uses}
\begin{itemize}
  \item config (Section~\ref{mIF})
  \item smoothImage (Section~\ref{mIS}) % may be removed since image smoothing is optional
  \item OpenCVLib (Section~\ref{mOpenCV})
\end{itemize}

\subsection{Syntax}

\subsubsection{Exported Constants}

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{4cm} p{4.5cm} p{4cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
initalize\_orb 
& mthd\_kp\_detection: $\mathbb{N}$,\newline
t: $\mathbb{N}$, \newline
b: $\mathbb{N}$, \newline
p: $\mathbb{N}$
& orb\_object: \href{https://docs.opencv.org/3.4/db/d95/classcv_1_1ORB.html}{OpenCV ORB Class}
& - \\
\hline
get\_orb\_object 
& -
& orb\_object: \href{https://docs.opencv.org/3.4/db/d95/classcv_1_1ORB.html}{OpenCV ORB Class}
& - \\
\hline
detect\_keypoints 
& orb\_object: \href{https://docs.opencv.org/3.4/db/d95/classcv_1_1ORB.html}{OpenCV ORB Class}, \newline
img: $\mathbb{N}^{h \times w}$
& keypoints: \href{https://docs.opencv.org/3.4/d2/d29/classcv_1_1KeyPoint.html}{OpenCV Keypoint Class}
& - \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}
\begin{itemize}
  \item orb\_object as \href{https://docs.opencv.org/3.4/db/d95/classcv_1_1ORB.html}{OpenCV ORB Class}
\end{itemize}

\subsubsection{Environment Variables}
none
% \begin{itemize}
%   \item sel\_read\_path as \textbf{str}
% \end{itemize}

\subsubsection{Assumptions}
none
\subsubsection{Access Routine Semantics}

\noindent initialize\_orb(mthd\_kp\_detection, t, b, p 
\textbar \: mthd\_kp\_detection == 1, mthd\_kp\_description == 1):
\begin{itemize}
  \item transition: tran:= orb\_object = ORB.create(t, b, p) 
  \item output: none
  \item exception: none
\end{itemize}
\noindent get\_orb\_object():
\begin{itemize}
  \item output: out:= orb\_object
  \item exception: none
\end{itemize}
\noindent detect\_keypoints(orb\_object, img):\newline\newline
keypoints = orb\_object.detect(img)
\begin{itemize}
  \item output: out:= keypoints
  \item exception: none
\end{itemize}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{MIS of Feature Descriptor Module} \label{mFD}
\begin{itemize}
  \item R\ref{R_Default_KD}
  \item R\ref{R_DefineDescriptors}
\end{itemize}
\subsection{Module}

assignDescriptors

\subsection{Uses}
\begin{itemize}
  \item config (Section~\ref{mC})
  \item detectKeypoints (Section~\ref{mKD})
  \item OpenCVLib (Section~\ref{mOpenCV})
\end{itemize}

\subsection{Syntax}

\subsubsection{Exported Constants}

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{4cm} p{5cm} p{4cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
compute\_descriptors
& img: $\mathbb{Z}^{h \times w}$, \newline
keypoints: \href{https://docs.opencv.org/3.4/d2/d29/classcv_1_1KeyPoint.html}{OpenCV Keypoint Class}
& descriptors: \href{https://docs.opencv.org/4.x/d0/d13/classcv_1_1Feature2D.html}{OpenCV Feature2D Class}
& - \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}
\subsubsection{State Variables}
\begin{itemize}
\item orb\_object: \href{https://docs.opencv.org/3.4/db/d95/classcv_1_1ORB.html}{OpenCV ORB Class}
\end{itemize}


\subsubsection{Environment Variables}
None.

\subsubsection{Assumptions}
\begin{itemize}
\item ORB object is instatiated in the Keypoint Detector Module.
\end{itemize}


\subsubsection{Access Routine Semantics}

\noindent compute\_descriptors(orb\_obj, img, keypoints):\\
orb\_object = get\_orb\_object()
\begin{itemize}
\item output: desc := orb\_object.compute(img, keypoints)
\item exception: None 
\end{itemize}




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{MIS of Feature Matching Module} \label{mFM}
\begin{itemize}
  \item R\ref{R_Default_FM}
  \item R\ref{R_CompareDescriptors}
\end{itemize}
\subsection{Module}

matchFeatures

\subsection{Uses}
\begin{itemize}
  \item config (Section~\ref{mC})
  \item detectKeypoints (Section~\ref{mKD})
  \item assignDescriptors (Section~\ref{mFD})
  \item OpenCVLib (Section~\ref{mOpenCV})
\end{itemize}

\subsection{Syntax}

\subsubsection{Exported Constants}

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{3.5cm} p{4cm} p{3.5cm} p{2.5cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
create\_BF\_matcher 
& mthd\_fm\_match: $\mathbb{N}$, \newline
norm\_method: $\mathbb{N}$, \newline
crosscheck\_flag: $\mathbb{B}$ 
& bf\_matcher\_object: \href{https://docs.opencv.org/3.4/d3/da1/classcv_1_1BFMatcher.html}{BFMatcher Class} 
& - \\
\hline
get\_bfm\_object 
& -
& bf\_matcher\_object: \href{https://docs.opencv.org/3.4/d3/da1/classcv_1_1BFMatcher.html}{BFMatcher Class} 
& - \\
\hline
match\_features 
& bf\_matcher\_object: \href{https://docs.opencv.org/3.4/d3/da1/classcv_1_1BFMatcher.html}{BFMatcher Class}, \newline
desc1, desc2: \href{https://docs.opencv.org/4.x/d0/d13/classcv_1_1Feature2D.html}{OpenCV Feature2D Class}
& matches: \href{https://docs.opencv.org/3.4/d4/de0/classcv_1_1DMatch.html}{OpenCV DMatch Class} 
& - \\
\hline
sort\_matches & bf\_matcher\_object: \href{https://docs.opencv.org/3.4/d3/da1/classcv_1_1BFMatcher.html}{BFMatcher Class}, \newline 
matches: \href{https://docs.opencv.org/3.4/d4/de0/classcv_1_1DMatch.html}{OpenCV DMatch Class}, \newline 
& sorted\_matches: \href{https://docs.opencv.org/3.4/d4/de0/classcv_1_1DMatch.html}{OpenCV DMatch Class}
& - \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}
\begin{itemize}
  \item bf\_matcher\_object: \href{https://docs.opencv.org/3.4/d3/da1/classcv_1_1BFMatcher.html}{BFMatcher Class}
\end{itemize}
\subsubsection{Environment Variables}

None.

\subsubsection{Assumptions}

Exception handling on user-selected methods and parameters are handled in the Parameter 
Specification Module.

\subsubsection{Access Routine Semantics}

create\_BF\_matcher(mthd\_fm\_match, norm\_method, crosscheck\_flag 
\textbar \: mthd\_fm\_match == 1):
\begin{itemize}
  \item output: out:= bf\_matcher\_object = BFMatcher(norm\_method, 
  crosscheck\_flag) 
  \item exception: None
\end{itemize} 
matches = match\_features(bf\_matcher\_object, desc1, desc2) 
\begin{itemize}
  \item output: out:= matches = bf\_matcher\_object.match(desc1, desc2)
  \item exception: None
\end{itemize}
sort\_matches(bf\_matcher\_object, matches):\newline
\begin{itemize}
  \item output: out:= sorted \_matches = bf\_matcher\_object.sorted(matches), where , such that the entries
  are organized in ascending order of the distance attribute
  \item exception: None
\end{itemize}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{MIS of Image Plot Module} \label{mIP}
\subsection{Module}
plotImage

\subsection{Uses}
\begin{itemize}
  \item OpenCVLib (Section~\ref{mOpenCV})
\end{itemize}

\subsection{Syntax}
\subsubsection{Exported Constants}
none 

\subsubsection{Exported Access Programs}
\begin{center}
\begin{tabular}{p{4cm} p{5cm} p{4cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
set\_parent\_directory
& dir: str
& -
& - \\
\hline
gen\_kp\_img 
& img\_in: $\mathbb{N}^{h \times w}$, \newline
keypoints: \href{https://docs.opencv.org/3.4/d2/d29/classcv_1_1KeyPoint.html}{OpenCV Keypoint Class}, \newline
flags: $\mathbb{N}$ & img\_kp $\in \mathbb{N}^{h \times w}$ & - \\
\hline
gen\_matched\_features 
& img\_1, img\_2: $\mathbb{N}^{h \times w}$, \newline
kp1, kp2: \href{https://docs.opencv.org/3.4/d2/d29/classcv_1_1KeyPoint.html}{OpenCV Keypoint Class}, \newline
matches: \href{https://docs.opencv.org/3.4/d4/de0/classcv_1_1DMatch.html}{OpenCV DMatch Class} \newline
max\_matches: $\mathbb{N}$, \newline
flags: $\mathbb{N}$
& img\_matches: $\mathbb{N}^{h \times w}$ & - \\
\hline
save\_image
& img\_in: $\mathbb{N}^{h \times w}$, \newline
target\_folder: str, \newline
img\_name: str
& png\_out: png image
& - \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}
\begin{itemize}
  \item DrawMatchesFlag: $\mathbb{N}$
  \item colour:= $\mathbb{N}^{3}$
\end{itemize}


\subsubsection{Environment Variables}
\begin{itemize}
  \item parent\_dir:= str
  \item img\_output\_path:= str
\end{itemize}

\subsubsection{Assumptions}
\begin{itemize}
  \item gen\_kp\_img has been initialized with keypoints
\end{itemize}


\subsubsection{Access Routine Semantics}

\noindent set\_parent\_directory(dir)
\begin{itemize}
  \item transition: tran:= parent\_dir = dir
  \item output: none
  \item exception: none
\end{itemize}


\noindent gen\_kp\_img(img\_in, keypoints, flags):\newline
img\_keypoints = drawKeypoints(img\_in, keypoints, colour, flags)
\begin{itemize}
  \item output: img\_keypoints $\in \mathbb{N}^{h \times w}$
  \item exception: none
\end{itemize}


\noindent gen\_matched\_features(img\_1, img\_2,kp1, kp2, matches, max\_matches): \newline 
img\_matches = cv.drawMatches(img\_1, kp1, img\_2, kp2, matches[:max\_matches], 
flags)
\begin{itemize}
  \item output: img\_matches $\in \mathbb{N}^{h \times w}$, where the displayed matches 
  range from 1:max\_matches have the smallest distance attribute
  \item exception: none
\end{itemize}

save\_image(img\_in, target\_folder, img\_name):
\begin{itemize}
  \item transition: img\_output\_path = join(parent\_dir, target\_folder, img\_name)
\end{itemize}

\begin{itemize}
  \item output: out:= png\_out = imwrite(img\_in, img\_output\_path)
  \item exception: none
\end{itemize}




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{MIS of OpenCV Module} \label{mOpenCV}
\subsection{Module}
OpenCVLib

\subsection{Uses}
\begin{itemize}
  \item config (Section~\ref{mIF})
\end{itemize}

\subsection{Syntax}
\subsubsection{Exported Constants}
None.

\subsubsection{Exported Access Programs}
General OpenCV Access Programs
\begin{center}
\begin{tabular}{p{3.5cm} p{4.5cm} p{4.5cm} p{3cm}}
\hline
\textbf{Name} & \textbf{Input} & \textbf{Output} & \textbf{Exceptions} \\
\hline
imread & sel\_read\_path: \textbf{str} & 
img $\in \mathbb{N}^{h \times w}$ & inValidImgPath \\
\hline
imwrite & sel\_save\_path: \textbf{str}, \newline 
out\_img: $\mathbb{N}^{h \times w}$ & 
img\_png as .png & inValidImgPath \\
\hline
gaussianBlur & img: $\mathbb{N}^{h \times w}$, \newline 
k: $\mathbb{N}$, \newline 
$\sigma$: $\mathbb{R}$
& smooth\_img: $\mathbb{N}^{m\times n}$ & -\\
\hline
drawKeypoints & img\_in: $\mathbb{N}^{h \times w}$, \newline
keypoints: \href{https://docs.opencv.org/3.4/d2/d29/classcv_1_1KeyPoint.html}{OpenCV Keypoint Class}, \newline
colour: $\mathbb{N}^{3}$, \newline 
flags: $\mathbb{N}$ 
& img\_kp: $\mathbb{N}^{h \times w}$ & - \\
\hline
drawMatches& img1\_in: $\mathbb{N}^{h_{1} \times w_{1}}$, \newline 
img2\_in: $\mathbb{N}^{h_{2} \times w_{2}}$ \newline 
kp1, kp2: \href{https://docs.opencv.org/3.4/d2/d29/classcv_1_1KeyPoint.html}{OpenCV Keypoint Class}, \newline
flags: $\mathbb{N}$
& img\_matches: $\mathbb{N}^{(h_{1}+h_{2}) \times (w_{1}+w_{2})}$
& - \\
\hline
ORB.create & b: $\mathbb{N}$, \newline 
p: $\mathbb{N}$, \newline 
t: $\mathbb{N}$ \newline 
& orb\_object: \href{https://docs.opencv.org/3.4/db/d95/classcv_1_1ORB.html}
{OpenCV ORB Class} & - \\
\hline
BFMatcher 
& match\_method: $\mathbb{N}$, \newline 
cross\_check\_flag: $\mathbb{B}$ 
& brute\_force\_object: \href{https://docs.opencv.org/3.4/d3/da1/classcv_1_1BFMatcher.html}
{OpenCV Brute Force Matcher Class} \newline 
& -\\
\hline
\end{tabular}
\end{center} 
ORB Object Member Functions
\begin{center}
\begin{tabular}{p{4cm} p{4cm} p{5cm} p{3cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
detect 
& img: $\mathbb{Z}^{h \times w}$ 
& keypoints: \href{https://docs.opencv.org/3.4/d2/d29/classcv_1_1KeyPoint.html}{OpenCV Keypoint Class} 
& invalidImg \\
\hline
compute & $\text{img} \in \mathbb{Z}^{h \times w}$, \newline 
keypoints: \href{https://docs.opencv.org/3.4/d2/d29/classcv_1_1KeyPoint.html}{OpenCV Keypoint Class} 
& descriptors: \href{https://docs.opencv.org/4.x/d0/d13/classcv_1_1Feature2D.html}{OpenCV Feature2D Class} 
& invalidImg, \newline 
invalidKeypoints \\
  \hline
  \end{tabular}
\end{center}
Brute Force Matcher Object Functions
\begin{center}
  \begin{tabular}{p{3cm} p{4cm} p{5cm} p{3cm}}
  \hline
  \textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
  \hline
  match & fd1, fd2: \href{https://docs.opencv.org/4.x/d0/d13/classcv_1_1Feature2D.html}{OpenCV Feature2D Class} 
  & matches: \href{https://docs.opencv.org/3.4/d4/de0/classcv_1_1DMatch.html}{OpenCV DMatch Class} 
  & Raises an error if descriptors are invalid or empty. \\
  \hline
  sorted 
  & unsorted\_matches: \href{https://docs.opencv.org/3.4/d4/de0/classcv_1_1DMatch.html}{OpenCV DMatch Class} 
  & sorted\_matches: \href{https://docs.opencv.org/3.4/d4/de0/classcv_1_1DMatch.html}{OpenCV DMatch Class} & - \\
  \hline
  \end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}
\begin{itemize}
  \item orb\_object: \href{https://docs.opencv.org/3.4/db/d95/classcv_1_1ORB.html}{OpenCV ORB Class}
  \item bf\_matcher\_object: \href{https://docs.opencv.org/3.4/d3/da1/classcv_1_1BFMatcher.html}{BFMatcher Class}
  \end{itemize}

\subsubsection{Environment Variables}
None.

\subsubsection{Assumptions}
\begin{itemize}
    \item The input image is a valid grayscale or color image.
    \item Keypoints are detected before computing descriptors.
    \item ORB objects are initialized prior to use.
    \item BFMatcher objects are initialized prior to use.
\end{itemize}

\subsubsection{Access Routine Semantics}

\noindent imread(sel\_read\_path as str):
\begin{itemize}
\item output: out:= img $\in \mathbb{N}^{h \times w}$
\item exception: if no image identified, flag as inValidImgPath 
\end{itemize}

\noindent imwrite(sel\_save\_path as \textbf{str}, out\_img 
$\in \mathbb{N}^{h \times w}$):
\begin{itemize}
\item output: out:= img\_png as .png file
\item exception: exc:= invalidImage
\end{itemize}

\noindent gaussianBlur(img, k, $\sigma$):
\begin{itemize}
    \item output: out:= img\_out
    \item exception: none
\end{itemize}

\noindent drawKeypoints(img\_in, keypoints, colour, flags):
\begin{itemize}
\item output: out:= img\_kp 
\item exception: none
\end{itemize}

\noindent drawMatches(img1\_in, img2\_in, kp1, kp2, matches, flags):
\begin{itemize}
\item output: img\_matches $\in \mathbb{N}^{(h_{1}+h_{2}) \times (w_{1}+w_{2})}$
\end{itemize}

\noindent ORB.create(b, p, t):
\begin{itemize}
    \item output: out:= orb\_object as \href{https://docs.opencv.org/3.4/db/d95/classcv_1_1ORB.html}{OpenCV ORB Class}
    \item exception: None. 
\end{itemize}

\noindent detect(img):
\begin{itemize}
    \item output: out:= keypoints as \href{https://docs.opencv.org/3.4/d2/d29/classcv_1_1KeyPoint.html}{OpenCV Keypoint Class}
    %= \{ (x_i, y_i, s_i, \theta_i, r_i) \mid i \in \mathbb{N} \} \), where:
    % \begin{itemize}
    %     \item \( (x_i, y_i) \in \mathbb{R}^2 \) (spatial coordinates)
    %     \item \( s_i \in \mathbb{R}^+ \) (scale)
    %     \item \( \theta_i \in \mathbb{R}^+ \) (orientation)
    %     \item \( r_i \in \mathbb{R} \) (response strength)
    % \end{itemize}
    \item exception: invalidImage
\end{itemize}

\noindent compute(img, keypoints):
\begin{itemize}
    \item output: out:= descriptors as \href{https://docs.opencv.org/4.x/d0/d13/classcv_1_1Feature2D.html}{OpenCV Feature2D Class}
    \item exception: exc:=
    \begin{itemize}
      \item image not found $\Rightarrow$ invalidImg
      \item keypoints not found $\Rightarrow$ invalidKeypoints
    \end{itemize}
\end{itemize}

\noindent match(fd1, fd2):
\begin{itemize}
\item output: out:= matches $M$ as \href{https://docs.opencv.org/3.4/d4/de0/classcv_1_1DMatch.html}{OpenCV DMatch Class}.
\item exception: exc:= Raises an error if the descriptors are invalid or empty.
  \begin{itemize}
      \item descriptors are invalid
  \end{itemize}
\end{itemize}

\noindent sorted(unsorted\_matches): 
\begin{itemize} 
  \item output: out:= sorted\_matches, where matches are sorted from unsorted\_matches 
  in ascending order of the distance attribute of the 
  \href{https://docs.opencv.org/3.4/d4/de0/classcv_1_1DMatch.html}{OpenCV DMatch Class}
  \item exception: Raises an error if the match set is empty. 
\end{itemize}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newpage

\bibliographystyle {plainnat}
\bibliography {../../../refs/References}

\newpage

\section{Appendix} \label{Appendix}
\wss{Extra information if required}
\end{document}